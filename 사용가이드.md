# 📱 DXF 도면 사진 삽입 앱 - 사용 가이드

## 🚀 빠른 시작

### 1단계: 앱 실행하기

#### 컴퓨터에서 테스트
```bash
# 프로젝트 폴더에서 실행
python -m http.server 8000

# 또는 Node.js가 설치되어 있다면
npx http-server -p 8000
```

브라우저에서 `http://localhost:8000` 열기

#### iPhone에서 사용하기

**방법 1: 웹 호스팅 서비스 이용 (권장)**
1. GitHub Pages, Netlify, Vercel 등에 업로드
2. iPhone Safari/Chrome에서 URL 열기
3. 공유 버튼 → "홈 화면에 추가" (앱처럼 사용)

**방법 2: 로컬 네트워크**
1. 컴퓨터에서 HTTP 서버 실행
2. 컴퓨터의 IP 주소 확인 (예: 192.168.0.10)
3. iPhone Safari에서 `http://192.168.0.10:8000` 열기

---

## 📖 상세 사용법

### 1️⃣ DXF 파일 열기

1. **"DXF 열기"** 버튼 클릭
2. 파일 선택 창에서 DXF 파일 선택
3. 도면이 자동으로 화면에 맞춰 렌더링됩니다

**지원 DXF 엔티티:**
- LINE (선)
- POLYLINE / LWPOLYLINE (다각선)
- CIRCLE (원)
- ARC (호)

**TIP:** 테스트를 위해 `sample.dxf` 파일을 사용해보세요!

---

### 2️⃣ 도면 탐색하기

#### 이동 (Pan)
- **컴퓨터:** 마우스 드래그
- **iPhone:** 손가락으로 드래그

#### 확대/축소 (Zoom)
- **버튼 사용:** 오른쪽 하단의 +/- 버튼 클릭
- **키보드:** (준비 중)
- **핀치 줌:** (준비 중)

**TIP:** 작은 부분을 자세히 보려면 여러 번 확대하세요!

---

### 3️⃣ 사진 추가하기

1. **"사진 추가"** 버튼 클릭
2. 사진 선택 (iPhone 사진 라이브러리 또는 카메라)
3. 사진이 화면 중앙에 자동 배치됩니다
4. 원하는 위치로 도면을 이동시켜 사진 위치 조정

**사진 정보:**
- 파일명이 사진 하단에 표시됩니다
- 파란색 테두리로 표시됩니다
- 여러 장 추가 가능합니다

**지원 이미지 형식:**
- JPEG / JPG
- PNG
- WEBP
- GIF

---

### 4️⃣ 메모 작성하기

1. 도면에 배치된 **사진을 클릭/터치**
2. 메모 편집 창이 팝업으로 나타납니다
3. 메모 입력란에 텍스트 작성
4. **"저장"** 버튼 클릭

**메모 활용 예시:**
- "균열 발견 - 보수 필요"
- "측정값: 3.5m"
- "2024-11-10 점검 완료"
- "담당자: 홍길동"

**사진 삭제:**
- 메모 편집 창에서 **"사진 삭제"** 버튼 클릭

---

### 5️⃣ 작업 내보내기

1. **"내보내기 (ZIP)"** 버튼 클릭
2. ZIP 파일이 자동으로 생성됩니다
3. 파일이 다운로드됩니다

**ZIP 파일 내용:**
```
[파일명]_package.zip
├── [파일명]_modified.dxf     ← 수정된 DXF 파일
├── images/                     ← 사진 폴더
│   ├── photo_1.jpg
│   ├── photo_2.jpg
│   └── ...
├── metadata.json              ← 사진 위치/메모 정보
└── README.txt                 ← 사용 설명서
```

---

## 💻 데스크탑에서 결과 확인하기

### AutoCAD에서 열기

1. ZIP 파일 압축 해제
2. `[파일명]_modified.dxf` 파일을 AutoCAD에서 열기
3. `metadata.json` 파일을 확인하여 사진 정보 보기

**metadata.json 예시:**
```json
{
  "dxfFileName": "floor_plan",
  "photos": [
    {
      "id": 1,
      "fileName": "photo_1.jpg",
      "originalFileName": "crack_photo.jpg",
      "x": 50.5,
      "y": 75.3,
      "width": 100,
      "height": 75,
      "memo": "벽면 균열 발견"
    }
  ]
}
```

### AutoCAD에서 이미지 수동 삽입하기

1. AutoCAD 명령: `IMAGE` 또는 `IMAGEATTACH`
2. `images/photo_1.jpg` 선택
3. metadata.json의 x, y 좌표 입력
4. 크기 width, height 값 입력

**자동화 방법:**
- AutoCAD LISP 스크립트 사용 (별도 제공 가능)
- metadata.json 읽어서 자동으로 이미지 배치

---

## ⚠️ 문제 해결

### DXF 파일이 안 열려요
**원인:** 지원하지 않는 DXF 버전 또는 손상된 파일
**해결:**
- AutoCAD에서 DXF를 다시 저장 (R12 또는 2000 형식)
- 파일 크기 확인 (50MB 이하 권장)
- 브라우저 콘솔에서 오류 메시지 확인

### 사진이 너무 작게/크게 나와요
**원인:** DXF 단위와 사진 크기 불일치
**해결:**
- 현재: 사진은 DXF 단위로 100 크기로 고정
- 향후: 사진 크기 조절 기능 추가 예정

### 도면이 안 보여요
**원인:** 도면이 화면 밖에 있음
**해결:**
- "DXF 열기"를 다시 클릭하여 리로드
- 줌 아웃 (-) 버튼 여러 번 클릭

### ZIP 파일이 다운로드 안돼요 (iPhone)
**원인:** 브라우저 설정 또는 저장 공간 부족
**해결:**
- Safari 설정 → 다운로드 → 다운로드 위치 확인
- 저장 공간 확인
- Chrome 브라우저로 시도

### 사진이 흐릿해요
**원인:** 이미지 압축 또는 렌더링 크기
**해결:**
- 고해상도 사진 사용
- 줌 인하여 확인
- 향후: 이미지 품질 설정 추가 예정

---

## 💡 활용 팁

### 현장 조사용
1. iPad/iPhone으로 현장 방문
2. DXF 도면 미리 로드
3. 현장에서 사진 촬영하며 즉시 도면에 추가
4. 현장에서 메모 작성
5. 사무실 복귀 후 ZIP 파일로 공유

### 협업 워크플로우
1. A 담당자: DXF + 사진 + 메모 작성
2. ZIP 파일로 내보내기
3. B 담당자: ZIP 파일 받아서 확인
4. 필요시 추가 사진/메모 작성
5. 최종 결과를 AutoCAD로 정리

### 프로젝트 관리
- 날짜별로 ZIP 파일 정리
- metadata.json으로 사진 개수 파악
- 메모로 진행 상황 추적

---

## 🔐 보안 및 개인정보

### 데이터 저장
- **모든 데이터는 브라우저 내에서만 처리됩니다**
- 서버로 업로드되지 않습니다
- 페이지 새로고침 시 데이터 삭제됩니다

### 권장 사항
- 중요한 작업은 자주 내보내기하여 백업
- 민감한 정보는 메모에 작성 주의
- 공용 와이파이에서 사용 시 주의

---

## 📊 성능 가이드

### 권장 사양
- **iPhone:** iPhone 11 이상
- **iOS:** 14.0 이상
- **브라우저:** Safari 14+ 또는 Chrome 최신 버전
- **저장 공간:** 최소 100MB 여유

### 권장 사용 범위
- DXF 파일: 10MB 이하
- 사진 개수: 20개 이하
- 사진 크기: 각 5MB 이하

### 최대 사용 범위
- DXF 파일: 50MB
- 사진 개수: 50개
- 사진 크기: 각 10MB

**TIP:** 사진이 많을 경우 여러 번 나눠서 작업하세요!

---

## 🆘 지원 및 문의

### 자주 묻는 질문
**Q: 오프라인에서 사용 가능한가요?**
A: 현재는 불가능합니다. PWA(Progressive Web App) 기능을 추가하면 가능합니다.

**Q: Android에서도 사용 가능한가요?**
A: 네! Chrome, Firefox, Samsung Internet 등 모던 브라우저에서 모두 작동합니다.

**Q: DXF 파일을 편집할 수 있나요?**
A: 현재는 불가능합니다. 사진과 메모만 추가할 수 있습니다.

**Q: PDF로 내보내기 가능한가요?**
A: 현재는 ZIP만 지원합니다. PDF 기능은 향후 추가 예정입니다.

**Q: 여러 사용자가 동시에 편집할 수 있나요?**
A: 현재는 불가능합니다. 실시간 협업 기능은 향후 추가 예정입니다.

---

## 📝 버전 히스토리

### v1.0.0 (2025-11-10)
- ✅ DXF 파일 열기 및 렌더링
- ✅ 확대/축소/이동 기능
- ✅ 사진 추가 및 배치
- ✅ 메모 작성 및 편집
- ✅ ZIP 파일 내보내기
- ✅ 모바일 터치 지원

### 향후 계획 (v1.1.0)
- [ ] 핀치 줌 제스처
- [ ] 사진 드래그하여 위치 조정
- [ ] 사진 회전 기능
- [ ] 실행 취소/다시 실행
- [ ] 이미지 리사이징

### 장기 로드맵 (v2.0.0)
- [ ] PWA 지원 (오프라인 사용)
- [ ] 클라우드 동기화
- [ ] PDF 내보내기
- [ ] AutoCAD 완벽 연동
- [ ] 실시간 협업

---

## 🎓 추가 학습 자료

### DXF 파일 형식
- [AutoCAD DXF Reference](https://www.autodesk.com/techpubs/autocad/dxf/)
- [DXF 파일 구조 이해하기](https://en.wikipedia.org/wiki/AutoCAD_DXF)

### 웹 기술
- [HTML5 Canvas Tutorial](https://developer.mozilla.org/ko/docs/Web/API/Canvas_API)
- [File API 사용법](https://developer.mozilla.org/ko/docs/Web/API/File)
- [Progressive Web Apps](https://web.dev/progressive-web-apps/)

---

**즐거운 작업 되세요! 🎉**

문제가 있거나 개선 아이디어가 있다면 언제든지 문의해주세요!

