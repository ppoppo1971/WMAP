이 프로그램은 아이폰 13PRO에서 사용하려 작성중인 웹앱 프로그램이다. 

주요기능은 현장에서 iso의 크롬브라우저에서 DXF 도면을 열어 뷰잉하고 사진과 간단한 텍스트를 삽입하여 내보내기를 통해 데스크탑에서 오토캐드로 도면을 열고 사진과 텍스트를 확인하는 것이다.

깃허브에 호스팅하여 구현한다.

수정과 기능 추가를 위해 코드를 분석하고 간략하게 보고하라.


1. 현재 누락된 기능
DXF 내보내기 기능 미구현
사진/텍스트가 포함된 DXF 생성 로직 없음
createModifiedDxf() 메서드 주석 처리됨 (2202-2220줄)
AutoCAD에서 사진을 보려면 DXF에 IMAGE 엔티티 추가 필요

2. 메타데이터 불러오기 미사용
loadMetadata() 메서드는 있지만 호출하지 않음
DXF 열 때 이전 사진/텍스트 복원 안 됨

3. 오프라인 지원 부족
Service Worker 없음 (PWA 미구현)
로컬 저장소 옵션 없음

버그 및 잠재적 문제
4. 롱프레스 중복 이벤트
setupLongPressEvents() (458줄)에서 마우스 이벤트 추가
onTouchStart() (1822줄)에서도 롱프레스 처리
데스크탑에서 중복 호출 가능성

5. 메모리 누수 가능성
photos 배열의 image 객체가 메모리에 계속 유지됨
Base64 imageData가 중복 저장됨

6. 에러 처리 미흡
Google Drive API 실패 시 사용자 경험 저하
네트워크 오류 시 재시도 로직 없음

UX 개선 사항
7. 로딩 상태 표시 부족
큰 DXF 파일 로드 시 진행률 표시 없음
사진 업로드 중 피드백 부족

8. 사진 크기 조절 불가
사진이 ViewBox의 10%로 고정됨
핀치로 사진 크기 조절 미지원

9. 실행 취소(Undo) 기능 없음
사진/텍스트 삭제 후 복구 불가


10. 하드코딩된 보안및설정


권장 우선순위:
🔴 최우선: DXF 내보내기 구현 (IMAGE 엔티티 생성)
🟠 중요: 메타데이터 불러오기 적용
🟡 개선: 사진 편집 기능 (크기, 회전, 드래그)
🟢 선택: 오프라인 PWA 지원



1. 롱프레시 위치에 이모지가 삽입된다. 이모지의 크기를 5px로 고정하라. 확대/ 축소, 이동시 이모지가 움직이는데 이것을 좌표로 고정하라.
2. 사진이 업로드시 기존 삽입되었던 사진도 다시 업로드되어 중복 저장이 된다. 개별적으로 업로드 되어야 한다. (메타데이터에도 반영)
3. 이모지터치시 모달을 표시하여 보기버튼을 선택하면 해당 사진을 열고, 삭제버튼을 선택하면 사진을 삭제하도록 하라. (구글드라이브에서도 삭제하고 메타데이터에도 반영)
4. 초기화면에서 구글로그인을 하면 도면뿐만 아니라 다른 파일들도 표시하고 dxf파일을 제외하곤 선택시 그 파일을 열어 확인할수 있도록 하라.
5. 초기화면에서 로그인을 해서 도면을 열때 dxf 파일을 열어주세요 라는 표시를 제거하라. 
6. 도면을 열때 관련된 메타데이타가 있으면 그 데이타의 정보대로 화면에 표시하라.(예를들어 사진이모지삽입등)

메타데이타 crud 변경가능?
로그인시 여러단계고침
확대축소 이동 램덤으로 멈춤
절대좌표로 삽입하여 캐드 연동성확보

