# 🎨 색상 문제 해결 가이드

## 🔍 문제 진단

DXF 파일을 열었을 때 **F12 콘솔**에서 다음 정보를 확인하세요:

### 1. 레이어 색상 정보
```
📋 레이어 개수: 5
레이어 색상:
  - "0": color=16777215, colorIndex=7
  - "Wall": color=16711680, colorIndex=1
  - "Door": color=65280, colorIndex=3
```

### 2. 엔티티 색상 정보
```
🎨 엔티티 색상 정보 (처음 5개):
  0. LWPOLYLINE: color=16711680, colorIndex=1
  1. LWPOLYLINE: color=undefined, colorIndex=256
  2. LINE: color=65280, colorIndex=3
```

### 3. 실제 적용 색상
```
🎨 [0] LWPOLYLINE → #FF0000 (출처: entity.color(number))
   상세: color=16711680, colorIndex=1, layer="Wall"

🎨 [1] LWPOLYLINE → #FF0000 (출처: layer.color(number))
   상세: color=undefined, colorIndex=256, layer="Wall"
```

---

## 🎯 문제별 해결 방법

### 문제 1: 폴리선이 검은색으로 표시됨

**원인:**
- `color=undefined`
- `colorIndex=0` 또는 `256` (ByLayer)
- 레이어 색상을 못 찾음

**해결:**
콘솔에서 다음을 확인:
```javascript
// 검은색으로 나온 폴리선의 정보
🎨 [X] LWPOLYLINE → #000000 (출처: default)
   상세: color=undefined, colorIndex=0, layer="LayerName"

// 해당 레이어 색상 확인
📋 레이어 색상:
  - "LayerName": color=?, colorIndex=?
```

**이 정보를 알려주시면 정확히 수정할 수 있습니다!**

---

### 문제 2: 폴리선 굵기가 다름

**원인:**
- DXF 파일에 width, startWidth, endWidth 속성이 있음
- CSS가 제대로 적용 안됨

**해결:**
```css
/* 이미 추가됨! */
#svg polyline {
    stroke-width: 0.3 !important;
}
```

**확인 방법:**
- F12 → Elements 탭
- SVG 요소 검사
- `stroke-width` 값 확인

---

### 문제 3: 확대가 안 됨

**해결:**
```javascript
// 최대 1000배 확대 가능!
const minSize = 0.001;
```

**사용:**
- + 버튼 연속 클릭 (최대 1000배)
- 매우 정밀한 위치 선택 가능

---

## 🧪 테스트 방법

### 1. GitHub 커밋
```bash
git add app.js index.html
git commit -m "선 굵기 CSS 강제, 색상 디버깅 강화, 확대 1000배"
git push origin main
```

### 2. 페이지 새로고침
```
Ctrl + Shift + F5
```

### 3. DXF 파일 열기

### 4. 콘솔 확인 (F12)

**다음 정보를 복사해서 알려주세요:**

```
📋 레이어 개수: ?
레이어 색상:
  - "레이어1": color=?, colorIndex=?
  - "레이어2": color=?, colorIndex=?

🎨 [0] LWPOLYLINE → #?????? (출처: ???)
   상세: color=?, colorIndex=?, layer="?"
🎨 [1] LWPOLYLINE → #?????? (출처: ???)
   상세: color=?, colorIndex=?, layer="?"
...
```

---

## 💡 임시 해결책

콘솔에서 직접 색상 확인/수정:

```javascript
// 1. 특정 엔티티 색상 확인
const entity = app.dxfData.entities[0];
console.log('엔티티:', entity);
console.log('색상:', app.getEntityColor(entity));

// 2. 레이어 색상 확인
console.log('레이어들:', app.dxfData.tables.layers);

// 3. 특정 레이어 색상 확인
const layer = app.dxfData.tables.layers['0'];
console.log('레이어 0:', layer);

// 4. 강제 색상 테스트
app.testColor = '#FF0000'; // 빨간색으로 테스트
// app.js의 getEntityColor를 임시로 return app.testColor로 변경
```

---

## 🎯 체크리스트

- [x] CSS로 선 굵기 강제 (`!important`)
- [x] 확대 제한 거의 제거 (1000배)
- [x] 색상 디버깅 강화 (20개 폴리선 출력)
- [x] 레이어 색상 정보 출력
- [ ] GitHub 커밋 ← **지금 해야 할 일**
- [ ] 페이지 새로고침 및 테스트
- [ ] 콘솔 로그 확인 및 공유

---

## 📞 도움 요청

다음 정보를 알려주시면 정확히 수정하겠습니다:

1. **콘솔에 출력된 레이어 색상 정보**
2. **검은색으로 나온 폴리선의 상세 정보**
3. **원래 AutoCAD에서는 무슨 색인지**

---

**커밋하고 콘솔 로그를 복사해서 보내주세요!** 🚀

