# 🔧 DXF 파일 호환성 가이드

## ❗ DXF 파일 로드 실패 시 해결 방법

웹앱에서 DXF 파일을 열 수 없다면, AutoCAD에서 호환성이 높은 버전으로 다시 저장해주세요.

---

## 📝 AutoCAD에서 호환 가능한 DXF 저장하기

### 방법 1: AutoCAD 2000 버전으로 저장 (권장)

1. **AutoCAD 열기**
2. **파일 메뉴 → 다른 이름으로 저장** 클릭
3. **파일 형식** 드롭다운 메뉴 클릭
4. **"AutoCAD 2000/LT2000 DXF (*.dxf)"** 선택
5. 파일명 입력 후 **저장**

```
✅ 이 버전은 대부분의 DXF 파서에서 잘 작동합니다.
```

---

### 방법 2: AutoCAD R12 버전으로 저장 (가장 호환성 높음)

1. **AutoCAD 열기**
2. **파일 메뉴 → 다른 이름으로 저장** 클릭
3. **파일 형식** 드롭다운 메뉴 클릭
4. **"AutoCAD R12/LT12 DXF (*.dxf)"** 선택
5. 파일명 입력 후 **저장**

```
✅ 가장 기본적인 버전으로 거의 모든 프로그램에서 열립니다.
⚠️ 일부 최신 기능(3D, 복잡한 객체)은 손실될 수 있습니다.
```

---

### 방법 3: 명령줄로 저장

1. AutoCAD 명령줄에 입력:
```
SAVEAS
```

2. **파일 형식** 선택:
   - `AutoCAD 2000 DXF` 또는
   - `AutoCAD R12 DXF`

3. 파일명 입력 후 Enter

---

## 🔍 브라우저 콘솔에서 오류 확인하기

DXF 로드에 실패한 경우, 브라우저 콘솔에서 자세한 오류를 확인할 수 있습니다.

### 콘솔 열기

**Windows:**
- Chrome/Edge: `F12` 또는 `Ctrl + Shift + J`
- Firefox: `F12` 또는 `Ctrl + Shift + K`

**Mac:**
- Chrome/Safari: `Cmd + Option + J`
- Firefox: `Cmd + Option + K`

**iPhone/iPad (Safari):**
1. 설정 → Safari → 고급 → 웹 속성 활성화
2. Mac Safari에서 개발 메뉴 → iPhone 선택

### 확인할 내용

콘솔에서 다음 정보를 확인하세요:

```javascript
// DXF 버전 정보
DXF 버전: 1015

// 파싱 결과
DXF 데이터: {entities: Array(150), ...}
엔티티 개수: 150개

// 렌더링 결과
렌더링 완료: 145개 성공, 5개 실패

// 경계 계산
경계 계산: 유효한 포인트 300개
도면 크기: 1000 x 800
```

---

## 🛠️ 문제별 해결 방법

### 문제 1: "올바른 DXF 파일 형식이 아닙니다"

**원인:** 파일이 DXF가 아니거나 손상됨

**해결:**
1. 파일 확장자가 `.dxf`인지 확인
2. 파일을 메모장으로 열어서 `SECTION`과 `ENTITIES` 문자열이 있는지 확인
3. AutoCAD에서 파일을 다시 열어서 정상인지 확인
4. AutoCAD에서 다시 저장

---

### 문제 2: "DXF 파일 파싱에 실패했습니다"

**원인:** DXF 버전이 너무 최신이거나 복잡한 엔티티 포함

**해결:**
1. **AutoCAD 2000 버전으로 다시 저장** (가장 효과적)
2. 또는 **R12 버전으로 저장**
3. 저장 전에 복잡한 객체(3D, 해칭 등) 단순화

**단순화 방법:**
```
AutoCAD 명령어:
FLATTEN    - 3D 객체를 2D로 변환
OVERKILL   - 중복 객체 제거
PURGE      - 불필요한 데이터 삭제
```

---

### 문제 3: "도면에 그려진 내용이 없는 것 같습니다"

**원인:** 엔티티가 없거나 파싱되지 않음

**해결:**
1. AutoCAD에서 도면을 열어서 실제로 내용이 있는지 확인
2. 모든 레이어가 켜져 있는지 확인 (명령어: `LAYON`)
3. 블록이 분해되지 않았는지 확인 (명령어: `EXPLODE`)
4. 도면 범위 확인 (명령어: `ZOOM` → `E`)

---

### 문제 4: "렌더링 완료: 0개 성공"

**원인:** 지원하지 않는 엔티티 타입만 포함

**현재 지원 엔티티:**
- ✅ LINE (선)
- ✅ POLYLINE / LWPOLYLINE (다각선)
- ✅ CIRCLE (원)
- ✅ ARC (호)

**미지원 엔티티:**
- ❌ TEXT / MTEXT (텍스트)
- ❌ HATCH (해칭)
- ❌ SPLINE (스플라인)
- ❌ 3DFACE, SOLID (3D 객체)
- ❌ DIMENSION (치수)

**해결:**
1. AutoCAD에서 복잡한 객체를 LINE/ARC로 변환
```
명령어: EXPLODE (객체 분해)
```
2. 텍스트는 현재 표시되지 않음 (향후 추가 예정)

---

## 📊 DXF 버전 호환성

| DXF 버전 | AutoCAD 버전 | 호환성 | 권장도 |
|---------|-------------|-------|-------|
| R12 | AutoCAD R12 | ⭐⭐⭐⭐⭐ | 높음 |
| R13 | AutoCAD R13 | ⭐⭐⭐⭐ | 중간 |
| 2000 | AutoCAD 2000 | ⭐⭐⭐⭐⭐ | **가장 권장** |
| 2004 | AutoCAD 2004 | ⭐⭐⭐ | 중간 |
| 2007 | AutoCAD 2007 | ⭐⭐ | 낮음 |
| 2010+ | AutoCAD 2010 이상 | ⭐ | 매우 낮음 |

---

## 💡 팁: 도면 단순화하기

DXF 파일을 더 잘 불러오기 위해 도면을 단순화하세요:

### 1. 불필요한 데이터 제거
```
PURGE      - 사용하지 않는 레이어, 블록 등 제거
AUDIT      - 도면 오류 수정
```

### 2. 객체 단순화
```
FLATTEN    - 3D를 2D로 변환
OVERKILL   - 중복 선 제거
PEDIT      - 폴리라인 최적화
```

### 3. 블록 분해
```
EXPLODE    - 블록을 개별 객체로 분해
```

### 4. 도면 범위 조정
```
ZOOM E     - 전체 도면 보기
ZOOM W     - 범위 지정
```

---

## 🧪 테스트용 간단한 DXF 만들기

문제 해결을 위해 간단한 테스트 DXF를 만들어보세요:

### 방법:
1. AutoCAD 새 도면 시작
2. 간단한 사각형과 원 그리기
   ```
   명령어:
   RECTANG  - 사각형
   CIRCLE   - 원
   ```
3. **AutoCAD 2000 DXF**로 저장
4. 웹앱에서 열어보기

이렇게 하면 웹앱이 정상 작동하는지 확인할 수 있습니다.

---

## 📞 그래도 안 될 때

### 확인 사항:

1. **파일 크기 확인**
   - 50MB 이하인가?
   - 너무 크면 여러 파일로 분할

2. **파일 인코딩 확인**
   - UTF-8 또는 ASCII인가?
   - 한글 파일명/경로는 피하기

3. **브라우저 확인**
   - 최신 버전인가?
   - 쿠키/캐시 삭제 후 재시도

4. **다른 DXF 뷰어로 테스트**
   - 온라인 DXF 뷰어에서 열리는가?
   - AutoCAD에서는 정상인가?

### 정보 공유:

문제가 계속되면 다음 정보를 개발자에게 공유해주세요:

```
1. DXF 버전: (콘솔에서 확인)
2. 엔티티 개수: (콘솔에서 확인)
3. 파일 크기: (MB)
4. AutoCAD 버전:
5. 브라우저: (Chrome/Safari/Firefox)
6. 오류 메시지: (콘솔에서 복사)
7. 콘솔 로그: (F12 → Console 내용 전체 복사)
```

---

## 🎯 빠른 해결 체크리스트

DXF 파일이 안 열릴 때 순서대로 시도하세요:

- [ ] 1. AutoCAD에서 **"AutoCAD 2000 DXF"**로 저장
- [ ] 2. 웹앱에서 다시 열기
- [ ] 3. 안되면 **"AutoCAD R12 DXF"**로 저장
- [ ] 4. 웹앱에서 다시 열기
- [ ] 5. 브라우저 콘솔(F12) 열어서 오류 확인
- [ ] 6. `PURGE`, `AUDIT` 명령어로 도면 정리
- [ ] 7. 복잡한 객체를 `EXPLODE`로 분해
- [ ] 8. 간단한 테스트 DXF 만들어서 테스트
- [ ] 9. 다른 브라우저에서 시도
- [ ] 10. 개발자에게 문의 (콘솔 로그 첨부)

---

## 🔄 대안: 다른 파일 형식

DXF가 계속 안 되는 경우:

1. **PDF로 변환**
   - AutoCAD에서 PDF로 출력
   - 단, 편집은 불가능

2. **이미지로 변환**
   - AutoCAD에서 PNG/JPG로 출력
   - 화질 손실 있음

3. **DWG를 DXF로 변환**
   - 온라인 변환기 사용
   - 예: CloudConvert, Zamzar

---

**도움이 필요하시면 콘솔 화면을 캡처해서 문의해주세요!** 📸

**마지막 업데이트:** 2025-11-10

